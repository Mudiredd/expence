(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{5477:(e,a,r)=>{"use strict";r.d(a,{C:()=>c,x:()=>o});var t=r(95155),s=r(12115),n=r(56104),l=r(93004),d=r(35317);let i=(0,s.createContext)(void 0),c=e=>{let{children:a}=e,[r,c]=(0,s.useState)([]),[o,m]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,l.hg)(n.j,e=>{h(e)});return()=>e()},[]),(0,s.useEffect)(()=>{if(u){m(!0);let e=(0,d.rJ)(n.db,"users",u.uid,"transactions"),a=(0,d.P)(e,(0,d.My)("date","desc"));(0,d.GG)(a).then(e=>{let a=[];e.forEach(e=>{let r=e.data();a.push({id:e.id,userId:u.uid,type:r.type,category:r.category,amount:r.amount,date:r.date instanceof d.Dc?r.date.toDate().toISOString().split("T")[0]:r.date,description:r.description})}),c(a)}).catch(e=>{console.error("Error fetching transactions from Firestore:",e),c([])}).finally(()=>{m(!1)})}else c([]),m(!1)},[u,n.db]);let x=(0,s.useCallback)(async e=>{if(!u)return void console.error("No user logged in to add transaction");try{let a=(0,d.rJ)(n.db,"users",u.uid,"transactions"),r={...e,date:d.Dc.fromDate(new Date(e.date))},t=await (0,d.gS)(a,r),s={...e,id:t.id,userId:u.uid};c(e=>[s,...e].sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()))}catch(e){console.error("Error adding transaction to Firestore:",e)}},[u,n.db]);return(0,t.jsx)(i.Provider,{value:{transactions:r,addTransaction:x,loading:o},children:a})},o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useTransactions must be used within a TransactionProvider");return e}},40157:(e,a,r)=>{"use strict";r.d(a,{A:()=>i});var t=r(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,t.forwardRef)((e,a)=>{let{color:r="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:m,...u}=e;return(0,t.createElement)("svg",{ref:a,...l,width:s,height:s,stroke:r,strokeWidth:i?24*Number(d)/Number(s):d,className:n("lucide",c),...u},[...m.map(e=>{let[a,r]=e;return(0,t.createElement)(a,r)}),...Array.isArray(o)?o:[o]])}),i=(e,a)=>{let r=(0,t.forwardRef)((r,l)=>{let{className:i,...c}=r;return(0,t.createElement)(d,{ref:l,iconNode:a,className:n("lucide-".concat(s(e)),i),...c})});return r.displayName="".concat(e),r}},52769:(e,a,r)=>{"use strict";r.d(a,{default:()=>C});var t=r(95155),s=r(12115),n=r(40157);let l=(0,n.A)("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),d=(0,n.A)("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),i=(0,n.A)("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);var c=r(66695),o=r(68856);let m=e=>{let{title:a,value:r,icon:s,isLoading:n,className:l,valueClassName:d}=e;return(0,t.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-2xl hover:-translate-y-1 hover:ring-2 hover:ring-primary/20 dark:hover:ring-primary/30 transition-all duration-300 ease-in-out ".concat(l),children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium text-muted-foreground",children:a}),(0,t.jsx)("div",{className:"text-primary",children:s})]}),(0,t.jsx)(c.Wu,{children:n?(0,t.jsx)(o.E,{className:"h-8 w-3/4 ".concat(d||"")}):(0,t.jsx)("div",{className:"text-2xl font-bold ".concat(d||""),children:"number"==typeof r?r.toLocaleString("en-IN",{style:"currency",currency:"INR"}):r})})]})};var u=r(5477),h=r(83540),x=r(3401),f=r(94754),p=r(96025),g=r(16238),y=r(94517),v=r(24026),j=r(83394),N=r(8782),b=r(34e3),w=r(54811);let k=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"],E=e=>new Date(e).toLocaleString("default",{month:"short",year:"numeric"}),C=()=>{let{transactions:e,loading:a}=(0,u.x)(),[r,n]=(0,s.useState)("");(0,s.useEffect)(()=>{n(E(new Date().toISOString()))},[]);let C=(0,s.useMemo)(()=>r?e.filter(e=>E(e.date)===r):[],[e,r]),I=(0,s.useMemo)(()=>{let e=C.filter(e=>"income"===e.type).reduce((e,a)=>e+a.amount,0),a=C.filter(e=>"expense"===e.type).reduce((e,a)=>e+a.amount,0);return{income:e,expenses:a,balance:e-a}},[C]),S=(0,s.useMemo)(()=>{let a={};return e.forEach(e=>{let r=E(e.date);a[r]||(a[r]={income:0,expenses:0}),"income"===e.type?a[r].income+=e.amount:a[r].expenses+=e.amount}),Object.keys(a).sort((e,a)=>new Date(e).getTime()-new Date(a).getTime()).slice(-6).map(e=>({name:e,Income:a[e].income,Expenses:a[e].expenses}))},[e]),D=(0,s.useMemo)(()=>{let e={};return C.filter(e=>"expense"===e.type).forEach(a=>{e[a.category]=(e[a.category]||0)+a.amount}),Object.entries(e).map(e=>{let[a,r]=e;return{name:a,value:r}}).sort((e,a)=>a.value-e.value)},[C]);return a?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,t.jsx)(o.E,{className:"h-32 rounded-lg"},e))}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsx)(o.E,{className:"h-80 rounded-lg"}),(0,t.jsx)(o.E,{className:"h-80 rounded-lg"})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsx)(m,{className:"animate-fadeIn",title:"Total Income",value:I.income,icon:(0,t.jsx)(l,{size:24}),isLoading:a,valueClassName:"text-green-600 dark:text-green-500"}),(0,t.jsx)(m,{className:"animate-fadeIn",style:{animationDelay:"100ms"},title:"Total Expenses",value:I.expenses,icon:(0,t.jsx)(d,{size:24}),isLoading:a,valueClassName:"text-red-600 dark:text-red-500"}),(0,t.jsx)(m,{className:"animate-fadeIn",style:{animationDelay:"200ms"},title:"Balance",value:I.balance,icon:(0,t.jsx)(i,{size:24}),isLoading:a,valueClassName:I.balance>=0?"text-blue-600 dark:text-blue-500":"text-orange-600 dark:text-orange-500"})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(c.Zp,{className:"shadow-lg animate-fadeIn",style:{animationDelay:"300ms"},children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{className:"font-headline",children:"Monthly Overview (Last 6 Months)"}),(0,t.jsx)(c.BT,{children:"Income vs. Expenses trends."})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(h.u,{width:"100%",height:300,children:(0,t.jsxs)(x.E,{data:S,children:[(0,t.jsx)(f.d,{strokeDasharray:"3 3",className:"stroke-border/50"}),(0,t.jsx)(p.W,{dataKey:"name",className:"text-xs"}),(0,t.jsx)(g.h,{className:"text-xs",tickFormatter:e=>"â‚¹".concat(e/1e3,"k")}),(0,t.jsx)(y.m,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)"},labelClassName:"font-semibold",formatter:e=>e.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),(0,t.jsx)(v.s,{wrapperStyle:{fontSize:"0.875rem"}}),(0,t.jsx)(j.y,{dataKey:"Income",fill:"hsl(var(--chart-1))",radius:[4,4,0,0]}),(0,t.jsx)(j.y,{dataKey:"Expenses",fill:"hsl(var(--chart-2))",radius:[4,4,0,0]})]})})})]}),(0,t.jsxs)(c.Zp,{className:"shadow-lg animate-fadeIn",style:{animationDelay:"400ms"},children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{className:"font-headline",children:"Expenses by Category (Current Month)"}),(0,t.jsx)(c.BT,{children:"Breakdown of your spending."})]}),(0,t.jsx)(c.Wu,{children:D.length>0?(0,t.jsx)(h.u,{width:"100%",height:300,children:(0,t.jsxs)(N.r,{children:[(0,t.jsx)(b.F,{data:D,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,dataKey:"value",nameKey:"name",label:e=>{let{name:a,percent:r}=e;return"".concat(a," ").concat((100*r).toFixed(0),"%")},children:D.map((e,a)=>(0,t.jsx)(w.f,{fill:k[a%k.length]},"cell-".concat(a)))}),(0,t.jsx)(y.m,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)"},formatter:(e,a)=>[e.toLocaleString("en-IN",{style:"currency",currency:"INR"}),a]}),(0,t.jsx)(v.s,{wrapperStyle:{fontSize:"0.875rem"}})]})}):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"No expense data for this month."})})]})]})]})}},56104:(e,a,r)=>{"use strict";let t,s,n;r.d(a,{db:()=>n,j:()=>s});var l=r(23915),d=r(93004),i=r(35317);t=0===(0,l.Dk)().length?(0,l.Wp)({apiKey:"AIzaSyBBqUfiHSRdQvn_NMWKJT2EfxKS27u8tKE",authDomain:"expense-firebase-c6d2a.firebaseapp.com",projectId:"expense-firebase-c6d2a",storageBucket:"expense-firebase-c6d2a.firebasestorage.app",messagingSenderId:"449543838004",appId:"1:449543838004:web:e054b06c5fcd2fbe166d61",measurementId:"G-SB1N18GJ35"}):(0,l.Dk)()[0],s=(0,d.xI)(t),n=(0,i.aU)(t)},59434:(e,a,r)=>{"use strict";r.d(a,{cn:()=>n});var t=r(52596),s=r(39688);function n(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.QP)((0,t.$)(a))}},64236:(e,a,r)=>{Promise.resolve().then(r.bind(r,52769))},66695:(e,a,r)=>{"use strict";r.d(a,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>l,aR:()=>d,wL:()=>m});var t=r(95155),s=r(12115),n=r(59434);let l=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});d.displayName="CardHeader";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",r),...s})});o.displayName="CardContent";let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});m.displayName="CardFooter"},68856:(e,a,r)=>{"use strict";r.d(a,{E:()=>n});var t=r(95155),s=r(59434);function n(e){let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",a),...r})}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,416,277,873,78,441,684,358],()=>a(64236)),_N_E=e.O()}]);