(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{5477:(e,r,a)=>{"use strict";a.d(r,{C:()=>c,x:()=>i});var t=a(95155),s=a(12115),n=a(56104),l=a(93004),d=a(35317);let o=(0,s.createContext)(void 0),c=e=>{let{children:r}=e,[a,c]=(0,s.useState)([]),[i,u]=(0,s.useState)(!0),[m,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,l.hg)(n.j,e=>{x(e)});return()=>e()},[]),(0,s.useEffect)(()=>{if(m){u(!0);let e=(0,d.rJ)(n.db,"users",m.uid,"transactions"),r=(0,d.P)(e,(0,d.My)("date","desc"));(0,d.GG)(r).then(e=>{let r=[];e.forEach(e=>{let a=e.data();r.push({id:e.id,userId:m.uid,type:a.type,category:a.category,amount:a.amount,date:a.date instanceof d.Dc?a.date.toDate().toISOString().split("T")[0]:a.date,description:a.description})}),c(r)}).catch(e=>{console.error("Error fetching transactions from Firestore:",e),c([])}).finally(()=>{u(!1)})}else c([]),u(!1)},[m,n.db]);let h=(0,s.useCallback)(async e=>{if(!m)return void console.error("No user logged in to add transaction");try{let r=(0,d.rJ)(n.db,"users",m.uid,"transactions"),a={...e,date:d.Dc.fromDate(new Date(e.date))},t=await (0,d.gS)(r,a),s={...e,id:t.id,userId:m.uid};c(e=>[s,...e].sort((e,r)=>new Date(r.date).getTime()-new Date(e.date).getTime()))}catch(e){console.error("Error adding transaction to Firestore:",e)}},[m,n.db]);return(0,t.jsx)(o.Provider,{value:{transactions:a,addTransaction:h,loading:i},children:r})},i=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useTransactions must be used within a TransactionProvider");return e}},31032:(e,r,a)=>{"use strict";a.d(r,{default:()=>b});var t=a(95155),s=a(12115),n=a(5477),l=a(83540),d=a(3401),o=a(94754),c=a(96025),i=a(16238),u=a(94517),m=a(24026),x=a(83394),h=a(8782),f=a(34e3),p=a(54811),g=a(66695),y=a(68856);let v=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"],j=e=>new Date(e).toLocaleString("default",{month:"short",year:"numeric"}),b=()=>{let{transactions:e,loading:r}=(0,n.x)(),a=(0,s.useMemo)(()=>{let r={};return e.forEach(e=>{let a=j(e.date);r[a]||(r[a]={income:0,expenses:0}),"income"===e.type?r[a].income+=e.amount:r[a].expenses+=e.amount}),Object.keys(r).sort((e,r)=>new Date(e).getTime()-new Date(r).getTime()).map(e=>({month:e,income:r[e].income,expenses:r[e].expenses}))},[e]),b=(0,s.useMemo)(()=>{let r={};return e.filter(e=>"expense"===e.type).forEach(e=>{r[e.category]=(r[e.category]||0)+e.amount}),Object.entries(r).map((e,r)=>{let[a,t]=e;return{name:a,value:t,fill:v[r%v.length]}}).sort((e,r)=>r.value-e.value)},[e]);return r?(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:[(0,t.jsx)(y.E,{className:"h-96 rounded-lg"}),(0,t.jsx)(y.E,{className:"h-96 rounded-lg"})]}):(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2 animate-fadeIn",children:[(0,t.jsxs)(g.Zp,{className:"shadow-xl",children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{className:"font-headline text-xl",children:"Monthly Income vs. Expenses"}),(0,t.jsx)(g.BT,{children:"Visualize your financial flow over time."})]}),(0,t.jsx)(g.Wu,{children:a.length>0?(0,t.jsx)(l.u,{width:"100%",height:350,children:(0,t.jsxs)(d.E,{data:a,children:[(0,t.jsx)(o.d,{strokeDasharray:"3 3",className:"stroke-border/50"}),(0,t.jsx)(c.W,{dataKey:"month",className:"text-xs"}),(0,t.jsx)(i.h,{className:"text-xs",tickFormatter:e=>"â‚¹".concat(e/1e3,"k")}),(0,t.jsx)(u.m,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)"},labelClassName:"font-semibold",formatter:e=>e.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),(0,t.jsx)(m.s,{wrapperStyle:{fontSize:"0.875rem"}}),(0,t.jsx)(x.y,{dataKey:"income",name:"Income",fill:"hsl(var(--chart-1))",radius:[4,4,0,0]}),(0,t.jsx)(x.y,{dataKey:"expenses",name:"Expenses",fill:"hsl(var(--chart-2))",radius:[4,4,0,0]})]})}):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"No data available for monthly summary."})})]}),(0,t.jsxs)(g.Zp,{className:"shadow-xl",children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{className:"font-headline text-xl",children:"Expenses by Category"}),(0,t.jsx)(g.BT,{children:"See where your money is going."})]}),(0,t.jsx)(g.Wu,{children:b.length>0?(0,t.jsx)(l.u,{width:"100%",height:350,children:(0,t.jsxs)(h.r,{children:[(0,t.jsx)(f.F,{data:b,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,dataKey:"value",nameKey:"name",label:e=>{let{name:r,percent:a}=e;return"".concat(r," ").concat((100*a).toFixed(0),"%")},children:b.map((e,r)=>(0,t.jsx)(p.f,{fill:e.fill},"cell-".concat(r)))}),(0,t.jsx)(u.m,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)"},formatter:(e,r)=>[e.toLocaleString("en-IN",{style:"currency",currency:"INR"}),r]}),(0,t.jsx)(m.s,{wrapperStyle:{fontSize:"0.875rem"}})]})}):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"No expense data available for category breakdown."})})]})]})}},56104:(e,r,a)=>{"use strict";let t,s,n;a.d(r,{db:()=>n,j:()=>s});var l=a(23915),d=a(93004),o=a(35317);t=0===(0,l.Dk)().length?(0,l.Wp)({apiKey:"AIzaSyBBqUfiHSRdQvn_NMWKJT2EfxKS27u8tKE",authDomain:"expense-firebase-c6d2a.firebaseapp.com",projectId:"expense-firebase-c6d2a",storageBucket:"expense-firebase-c6d2a.firebasestorage.app",messagingSenderId:"449543838004",appId:"1:449543838004:web:e054b06c5fcd2fbe166d61",measurementId:"G-SB1N18GJ35"}):(0,l.Dk)()[0],s=(0,d.xI)(t),n=(0,o.aU)(t)},59434:(e,r,a)=>{"use strict";a.d(r,{cn:()=>n});var t=a(52596),s=a(39688);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}},66695:(e,r,a)=>{"use strict";a.d(r,{BT:()=>c,Wu:()=>i,ZB:()=>o,Zp:()=>l,aR:()=>d,wL:()=>u});var t=a(95155),s=a(12115),n=a(59434);let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});d.displayName="CardHeader";let o=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",a),...s})});i.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},68856:(e,r,a)=>{"use strict";a.d(r,{E:()=>n});var t=a(95155),s=a(59434);function n(e){let{className:r,...a}=e;return(0,t.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",r),...a})}},99892:(e,r,a)=>{Promise.resolve().then(a.bind(a,31032))}},e=>{var r=r=>e(e.s=r);e.O(0,[992,416,277,873,78,441,684,358],()=>r(99892)),_N_E=e.O()}]);